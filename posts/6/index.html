
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Your wish is my command</title>
  <meta name="author" content="Choe, Cheng-Dae">

  
  <meta name="description" content="스크립트 작업할 때 리눅스 배포판을 확인해서 그에 따라서 작업할 경우가 있습니다. CentOS에는 어쩌구.. Ubuntu에서는 어쩌고&hellip; 배포판을 확인할 수 있는 명령은 lsb_release인데 man page에 따르면 아래와 같습니다. FSG &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://whitekid.github.io/posts/6/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Your wish is my command" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-3950194-6']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Your wish is my command</a></h1>
  
    <h2>It&#8217;s a long journey</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="whitekid.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/archives/1240">리눅스 배포판 및 버전 확인하기: Lsb_release</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-04-18T00:00:00+09:00'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>12:00 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>스크립트 작업할 때 리눅스 배포판을 확인해서 그에 따라서 작업할 경우가 있습니다. CentOS에는 어쩌구.. Ubuntu에서는 어쩌고&hellip;</p>

<p>배포판을 확인할 수 있는 명령은 lsb_release인데 man page에 따르면 아래와 같습니다.</p>

<blockquote><p>FSG lsb_release v2.0 prints certain LSB (Linux Standard Base) and Distribution information.</p></blockquote>

<p>여기서 주요하게 필요한 것이 -id(CentOS or Ubuntu), -release(5.8, 12.04)이 두가지 인데, CentOS와 Ubuntu에 약간 차이가 있습니다.</p>

<p>CentOS 5.8에서는</p>

<pre><code>$ lsb_release -i -r -s
CentOS 5.8
</code></pre>

<p>Ubuntu 12.04에서는</p>

<pre><code>$ lsb_release -i -r -s
Ubuntu
12.04
</code></pre>

<p>이를 스크립트에서 활용할 수 있게 tr 명령과 섞으면 아래와 같이 됩니다.</p>

<pre><code>$ /usr/bin/lsb_release -i -r -s | tr "\\n" " " | sed "s/ *\$//g "
Ubuntu 12.04
</code></pre>

<p>이제 이를 이용해서 OS에 따른 대응 코드를 만들면..</p>

<pre><code>#!/bin/bash
function get_dist(){
  /usr/bin/lsb_release -i -r -s | tr "\\n" " " | sed "s/ *\$//g "
}

case $(get_dist()) in
  CentOS*)
    SERVICE=/sbin/service
    SERVICE_NAME=network
    ;;
  Ubuntu*)
    SERVICE=/user/sbin/service
    SERVICE_NAME=networking
    ;;
  *)
    fatal "Not supported platform"
esac

$SERVICE $SERVICE_NAME restart
</code></pre>

<p>끄읏~</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/archives/1236">나의 메일 박스 레이아웃</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-03-26T00:00:00+09:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>26</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>12:00 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>요즘 업무용으로 쓰는 메일 박스의 레이아웃은</p>

<pre><code>받은편지함
0. 진행중
  +- 1. 할일
  +- 2. 기다림
1. 진행중인 프로젝트
  +- 1. Project A
2. 팀, 업무
3. 참고
4. 개인
5. 완료된 프로젝트
</code></pre>

<p>로.. 구성해서 쓰고 있다. 어디선가 본 메일박스를 이용한 GTD 활용법인데, 생각보다 유용하다.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/archives/1232">Bash Getopts</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-03-19T00:00:00+09:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>19</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>12:00 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>bash에서는 쉘 스크립트 옵션 처리를 위해서 getopts가 제공됩니다. (주의: getopt 명령과 다름)</p>

<pre><code>#!/bin/bash
while getopts "ha:" opt; do
  case $opt in
  h)
    echo "h option"
    ;;
  a)
    echo "a option=$OPTARG"
    ;;
  ?)
    exit
    ;;
  esac
done

shift $((OPTIND-1))
echo "나머지 인자: $@"
</code></pre>

<p>실행하는 것을 보면</p>

<pre><code>$ bash opttest.sh -h -a args hello
h option
a option=args
나머지 인자: hello
</code></pre>

<p>간단하지요.</p>

<p>getopts는 bash의 builtins으로 간단한 옵션을 처리하는 것이므로 몇가지 제공하지 않는 기능이 있습니다.</p>

<ul>
<li>긴 옵션을 지원하지 않음: $ opttest.sh -long_options 안됨</li>
<li>옵션이 뒤에 나올 수 없음: $ opttest.sh filename -h 지원하지 않음&hellip;</li>
</ul>


<p>이런 기능을 사용하려면 getopt 명령을 사용하면 되지만&hellip; 뭔가 정말로 복잡~ 쉘 스크립트니깐 간단하게 getopts를 사용하는 것을 권장합니다.</p>

<p>참고: <a href="http://wiki.bash-hackers.org/howto/getopts_tutorial">http://wiki.bash-hackers.org/howto/getopts_tutorial</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/archives/1223">Dnsmasq는 /etc/hosts를 읽는다. 그리고 No-hosts 옵션</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-03-18T00:00:00+09:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>12:00 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>dnsmasq는 dms forwarder로 개인적으로는 아주 간단한 DNS service(내부 개발 서비스)에 주로 사용합니다. 설치하고 /etc/dnsmasq.d/<domain> 파일이 아래처럼 넣으면 되니깐요.</p>

<pre><code>address=/chef.&lt;domain&gt;/192.168.xxx.xxx
address=/dns.&lt;domain&gt;/192.168.xxx.xxx
</code></pre>

<p>bind처럼 아주 복잡한 형식의 설정 파일을 건드릴 필요없으니깐요.</p>

<p>위의 예제는 내부 개발 인프라의 dns service를 위해서 저렇게 만들었는데&hellip; 하나 문제가 생깁니다. 두번째 호스트는 dns service를 하는 호스트를 표시하는데, 클라이언트에서는 name lookup을 하면 아래처럼 의도하지 않은 결과를 얻게됩니다.</p>

<pre><code>$ nslookup dns.&lt;domain&gt; 192.168.xxx.xxx
Server: 192.168.xxx.xxx
Address: 192.168.xxx.xxx#53

Name: dns.&lt;domain&gt;
Address: 127.0.0.1
</code></pre>

<p>녜.. 의도하지 않게 127.0.0.1로 나오지요.. 이게 뭔지 한참 멍하니 쳐다봤습니다. 해당 호스트로 접속하려니 connnection refused&hellip; dnsmasq 설정에는 문제가 없는데 말입니다.</p>

<p>좀 뒤져보니.. dnsmasq는 /etc/hosts 파일을 읽고 그것도 같이 서비스합니다. 그래서 /etc/hosts 파일을 보면</p>

<pre><code>127.0.0.1 localhost
127.0.0.0 dns.&lt;domain&gt; dns
</code></pre>

<p>녜.. 여기에서 설정된 호스트 이름이 dnsmasq에 의해서 서비스 되는 것입니다.</p>

<p>해결 방법은 2가지가 있습니다.</p>

<p>첫번째는 /etc/hosts 파일에 ip address 추가하는 겁니다. 127.0.0.1 대신 진짜 ip address를 넣는 것이지요.</p>

<pre><code>127.0.0.1 localhost
192.168.xxx.xxx dns.&lt;domain&gt; dns
</code></pre>

<p>두번째 방법은 /etc/dnsmasq.conf에서 no-hosts 옵션을 추가하는 겁니다. no-hosts 옵션의 설명에는 아래처럼 되어 있습니다.</p>

<blockquote><p>If you don&rsquo;t want dnsmasq to read /etc/hosts, uncomment the follow line.</p></blockquote>

<p>첫번째 방법은 일반적은 /etc/hosts 파일의 사용법에 벗어납니다. 따라서 두번째 방법을 사용하면 됩니다.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/archives/1227">Dhcp에서 제공하는 Dns 서버를 사용하지 않기</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-03-18T00:00:00+09:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>12:00 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>dhcp를 사용한다면 특별한 이유가 없는 한 dhcp server에서 제공하는 dns server를 사용합니다. 그런데 이 dns server가 아닌 다른 server를 사용하고자 한다면&hellip; 처음으로 /etc/resolv.conf를 직접 수정하는 방법을 생각할 것입니다.</p>

<p>그런데 이 방법의 문제는 /etc/resolv.conf에도 설명이 달린 것 처럼 dhcpclient가 renew 되었을 경우 수정한 내용이 덥혀쓰여진다는 것이지요.</p>

<p>이를 해결하는 방법은 dhclient.conf에 아래와 같이 사용할 dns server를 명시해주면 됩니다.</p>

<p>/etc/dhcp/dhclient.conf:</p>

<pre><code>prepend domain-name-servers &lt;custom-dns-server&gt;;
</code></pre>

<p>이렇게 설정된 dns는 /etc/resolv.conf에서 첫번재 entry로 등록이 됩니다. 이 옵션은 중복으로 사용 가능합니다.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/archives/1220">OSX에서 Bash Auto Competition 사용하기..</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-03-12T00:00:00+09:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>12</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>12:00 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>MacBook을 이제 메인으로 쓰면서 Ubuntu에서 자연스럽게 되된 bash의 자동완성이 안되서 불편한 점이 있습니다. 그래서 간단히 찾아서 설정해봤군요.</p>

<p>먼저 <a href="http://mxcl.github.com/homebrew/">Homebrew</a>를 이용해서 bash completion 패키지를 설치하여 자동완성 지원 파일들을 설치합니다.</p>

<pre><code>$ brew install bash-completion
</code></pre>

<p>이제 ~/.bash_profile에 다음 라인을 추가하여 자동완성이 되도록합니다.</p>

<pre><code>if [ -f /usr/local/etc/bash_completion ]; then
  . /usr/local/etc/bash_completion
fi
</code></pre>

<p>자.. 다시 쉘을 열고 &ldquo;ssh &#8220;를 입력한 다음에 탭을 두번 누르면 자동완성으로 .ssh/config, .ssh/known_hosts에 있는 호스트들이 쫘악~~</p>

<p>끄읏~</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/archives/1218">매달 자신을 자신의 사무실로 불러 평가하는 것이다.</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-02-28T00:00:00+09:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>28</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>12:00 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>&ldquo;어떻게 하고 있는가? 어느 점이 부족한가? 더 잘하기 위해 필요한 도구나 정보, 도움은 있는가?”
다음의 조언을 참고해보자.</p>

<ul>
<li>작은 목표와 큰 목표를 모두 세운다. 그러면 자신을 평가할 시간이 되었을 때 일부 목표는 이미 완성할 수 있다.</li>
<li>자신의 일이 모든 측면에서 더 큰 목적과 연관되는 방법을 스스로 이해한다.</li>
<li>지나치다 싶을 정도로 정직해진다. 이 연습은 자신의 수행능력을 향상하고 숙련을 달성하는데 도움을 주는 것을 목표로 한다. 그러므로 실수에서 교훈을 배우기는 커녕 대충 얼버무리거나 자신의 실패를 합리화한다면 시간낭비일 따름이다.</li>
</ul>


<p>출처: 드라이브</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/archives/1211">Sublimetext 설정</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-02-20T00:00:00+09:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>20</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>12:00 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>폰트 설정</h3>

<p>Preference > Settings - User</p>

<pre><code>// Settings in here override those in "Default/Preferences.sublime-settings",
// and are overridden in turn by file type specific settings.
{
  "font_face": "나눔고딕코딩",
  "font_size": 16
}
</code></pre>

<p>ref. <a href="http://docs.sublimetext.info/en/latest/reference/settings.html">http://docs.sublimetext.info/en/latest/reference/settings.html</a></p>

<h3>Command line 설정</h3>

<pre><code>$ ln -s "/Applications/Sublime Text.app/Contents/SharedSupport/bin/subl" ~/bin/subl
</code></pre>

<h3>Package 설정</h3>

<p><a href="http://wbond.net/sublime_packages/package_control">Sublime Package Control</a> 설치한 후에 아래 패키지 설치치</p>

<ul>
<li>Python Auto Complete</li>
<li>Django Click</li>
<li>Djanero</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/archives/1206">재밌는 일을 찾아가기&#8230;</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-02-19T00:00:00+09:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>19</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>12:00 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>요즘 인생의 전환기에 있습니다. 녜.. 멀쩡히 다니던 회사를 그만둔 것이죠. 어쨌든 대기업 계열사니깐 누구한테 이야기하면.. 오.. 라는 말이 나오는 사정이긴 합니다만.. 훌훌 털고 나왔습니다.</p>

<p>이유는 하나&hellip; 재밌는 일.. 내가 하고 싶은 일 찾아가기&hellip;</p>

<p>일이 재미 없었나구요? 물론 재미가 없었다고 말하면 거시기합니다. 일 자체는 참으로 재미있었죠. 하지만 제 자리에 앉아서 뚝딱뚝딱하는 딱 그 시간만 재미있었다고나 할까&hellip;</p>

<p>나만이 은둔하던 세상을 벗어나면 담담함.. 그 자체였습니다. 그런데 신기한건 제가 이렇게 은둔하면서 지내는 데도 사람들은 저보고 일을 잘한다고 합니다. 정말로 재밌습니다.</p>

<p>제가 은둔하게 된 계기는 뭐&hellip; 간단합니다. 도데체 이놈의 프로젝트가 산으로만 갑니다. 이런 저런 말만 많고, 사공은 없고, 모두들 선장, 항해사가 되려고 합니다. 그러니 이것 저것 깔짝거리다가.. 다시 제자리.. 실제로 되는 일은 없고&hellip; 그리고 헤드급이 아닌 동료들과 일을 시작하려면, 다른 누군가가 뭔가 일을 주기만을 기다리고 있습니다.</p>

<p>저를 아는 사람들은 이런 상황에서 제가 어떻게 행동할 것인지 잘 알겁니다.</p>

<p>첫번째.. 이 상황을 몸으로 뚫고 나가자.. 두번째 은둔&hellip; 녜.. 전 두번째 은둔을 선택했습니다. 첫번째는 제가 좋아하는 정면돌파의 방법인데, 이건 이렇게 정면 돌파하고 나가고, 싸우다 장렬히 전사해도 적어도 국립묘지에 묻힐 수 있다는 든든한 믿음이 있어야 합니다. 어렸을 때는 앞뒤 안보고 질렀는데.. 이제는 처자식이 딸려서 그러기 힘드네요. 그래서 내 나름대로 프로젝트가 가는 방향을 예상해서 혼자 묵묵히 진행해 나가는 것이죠.. 능력이 안되서 고생 많이 했습니다.</p>

<p>그러다 보니깐 참으로 재밌더군요. 누군가가 말하하는 몰입(flow)에도 자주 갔었습니다. 젊었을 때 느꼈던 그런 열정도 느낄 수 있었습니다.  하지만 이런 은둔의 한계는 혼자만의 것일 뿐이라는 겁니다.</p>

<p>결국.. 이렇게 은둔하는 것도 한계 상황에 다다른 것이죠&hellip; 녜&hellip; 결론처럼 이제 새로운 것을 찾아 떠나기로 했습니다. 제가 하고 싶은 일을 같이 즐겁게 할 수 있는 조직을 찾아서..</p>

<p>창업하냐고 물어들 봅니다. 아뇨.. 저는 그런 위인이 못됩니다. 제가 회사를 경영하면 망해요. ^^; 이런 이상주의자에다가&hellip; 이기주의에 고집불통인 사람은 위로 갈수록 위험한 사람이죠&hellip; 그냥 옆에서 지나가면서 툭툭 옳은 말 해주는 것이 제 역할일 겁니다.</p>

<p>^^;</p>

<p>그런데 재밌는 일이 뭘까요? 고민이 많습니다. 아니면 제가 하고 싶은 일이 뭘까?.. 그것도 고민이 많아요.</p>

<p>나름 새워놓은 계획 및 생각도 있지요. 하지만 아직은&hellip; 아직은 그런 일들을 실행해 옮길만한 경험이나, 여러 위기 상황에 대처하는 임기응변, 저돌적인 돌파력, 목표를 달성하려는 집요합, 옳은 것을 추구하는 정의감&hellip; 등&hellip; 이런 생각들을 성공에 이르게하는 여러 부수적인 것들이 너무도 부족하다는 것을 스스로 느끼고 있습니다. 이런 것들을 좀 더 쌓아햐 합니다. 아직 어려요.. ^^;</p>

<p>그래서 고민이 많습니다.</p>

<p>아직 부족한데 이런 부족한 나를 감내해주려는 사람도 있고, 아직 부족한데.. 옆있으며 더 배우고 싶은 사람도 있고.., 아직 부족한데&hellip; 더 채워야할 것인데.. 라는 생각이 강합니다.</p>

<p>그냥 정리해 볼랍니다. 재미란&hellip;</p>

<ul>
<li>창조적인, 지식 노동자는 반드시 일이 재밌어야 한다.</li>
<li>누군가 시켜서 하는 재미는 진정한 재미가 아니다. 재미는 내재된 것이 밖으로 표출되는 것이다. 즉, 자율과 책임의 위임이다.</li>
<li>너무 어려워서도, 너무 쉬워서도 안된다&hellip; 즉 구성원들에 대한 세세한 조절이 필요하다.</li>
<li>업무에 재미를 못 느끼는 사람은 없다. 다 느낄 수 있다. 다만 지금까지의 환경때문에 잠시 잊고 살아왔던 것일 뿐이다. 어렵게 보지 말자. 아주 어렸을 때.. 초등학교 들아가기 전에는 세상은 온통 재밌는 것 뿐이었다.</li>
<li>부정적인 것을 보지 말고, 긍정적인 면을 보라.. 재미는 긍정에 있다. 모든 구성원이 모두 수퍼맨이 되길 원하지 말라~</li>
<li>아무리 단순 반복된 일이라도 재미로 바꿀 수 있다. (허클베리 핀의 페인트 칠하기를 보라.. 어렵다면 자포스를 보라..)</li>
<li>서로 협력하여 할 수 있는 조직을 만들어라&hellip; 내팀이 아니라 &ldquo;우리&rdquo; 팀이다. 내가 담당하는 기능이 아니라.. &ldquo;우리&#8221;가 만들어 가야 하는 기능이다.</li>
<li>학습하며 성장하는 우리가 된다. 처음부터 전문가는 없다. 그래서 모르는, 하지만 해처 나가야할 문제가 생기면 기꺼이 감내한다.</li>
<li>그리고 이 모든 것은 기본적으로 먹고 사는 것에 문제가 없어야 가능하다.</li>
</ul>


<p>이런 회사(팀, 조직)을 만들어 보는 것이 제 꿈입니다. 그리고 이런 팀, 조직을 서로 조직하여 하나의 공동체로 만들어 보는게 꿈입니다.</p>

<p>그냥.. 이런 저런 생각이 많은 나날들입니다.</p>

<p>ps. 재밌게 살자~</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/archives/1194">도데체 내 Floatingip-list는 뭔고? + Field_specs 사용법</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2012-12-18T00:00:00+09:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2012</span></span> <span class='time'>12:00 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>quantum은 nova와는 다르게 사용자를 구별하지 않습니다. 아직 keystone의 인증 기능이 완전하게 통합되지 않는 것이죠. 아마도 grizzly에서 해결할 것 같습니다.</p>

<p>그런데 지금 너무 불편합니다. quantum floatingip-list하면 내가 할당받은 floatingip-list만 나와도 정신없는데, 다른 tenant의 것까지 나온다면 더욱 더 정신없습니다. nova처럼 내것만 나오면 좋을텐데 말입니다.</p>

<p>목마른 사람이 우물판다고 간단하게 스크립트 만들어 봤습니다.</p>

<pre><code>#!/bin/bash
TENANT_ID=$(keystone tenant-list | grep " $OS_TENANT_NAME " | awk '{print $2}')
ARG=$@

if [ ! -z "$TENANT_ID" ]; then
    EXTARG=-tenant_id=${TENANT_ID}

    if [[ ! "$ARG" =~ ' --- ' ]]; then
        EXTARG="- $EXTARG"
    fi
fi

quantum $ARG $EXTARG
</code></pre>

<p>사용법은 q.sh로 저장하시고 quantum 명령과 동일하게 쓰면 됩니다. 이제 q.sh로 실행하면 quantum의 대부분의 query 명령이 내가 속한 tenant의 것만 나옵니다. 이제 눈이 좀 정갈해 지는군요.</p>

<p>quantum의 help를 아무리 뒤져봐도 특정 tenant의 목록을 가져오는 것은 없습니다. 유일하게 힌트가 보이는 것 이라고는 filter_specs가 있는데, 여기 키와 값에 뭘 넣어야할지 막막하기도 합니다. 녜 quantum은 이제 folsom 버전에 들어가서 아직 부족한 부분이 많아서 그렇습니다. 당연 문서도 부족합니다(cinder도 아마 그렇지요).</p>

<p>filter_specs에 넣을 수 있는 값들은 리스트된 객체를 show 했을때 보이는 값입니다.</p>

<pre><code>root@:~# quantum net-list
+--------------------------------------+---------+--------------------------------------+
| id                                   | name    | subnets                              |
+--------------------------------------+---------+--------------------------------------+
| 0ded8d5c-9820-4e90-8ca8-97e4a072b2e1 | demo2   | 5d21c90d-7640-4de4-bed7-ce27421851d3 |
| 791d5c88-c437-4f82-97f0-ce435acb2172 | ext_net | c9f2a3cf-2013-4452-b3f5-c778143cc87f |
| d4950d6e-d796-4e30-9fba-d33599ba3644 | admin   | 304f2b2b-6e8f-403c-96b6-0b292007685d |
| e8d18114-540d-4c5e-b2a9-32e4a2e29625 | demo1   | 67b07eb0-235b-4dc4-843c-81e41247e737 |
+--------------------------------------+---------+--------------------------------------+
root@:~# quantum net-show ext_net
+---------------------------+--------------------------------------+
| Field                     | Value                                |
+---------------------------+--------------------------------------+
| admin_state_up            | True                                 |
| id                        | 791d5c88-c437-4f82-97f0-ce435acb2172 |
| name                      | ext_net                              |
| provider:network_type     | gre                                  |
| provider:physical_network |                                      |
| provider:segmentation_id  | 1                                    |
| router:external           | True                                 |
| shared                    | False                                |
| status                    | ACTIVE                               |
| subnets                   | c9f2a3cf-2013-4452-b3f5-c778143cc87f |
| tenant_id                 | e949c418d49649c39005d6dfa7d3ade2     |
+---------------------------+--------------------------------------+
</code></pre>

<p>이라고 했을때 여기서 ext_net을 찾는 방법은 아래와 같습니다.</p>

<pre><code>root@:~# quantum net-list -- --name=ext_net
+--------------------------------------+---------+--------------------------------------+
| id                                   | name    | subnets                              |
+--------------------------------------+---------+--------------------------------------+
| 791d5c88-c437-4f82-97f0-ce435acb2172 | ext_net | c9f2a3cf-2013-4452-b3f5-c778143cc87f |
+--------------------------------------+---------+--------------------------------------+
root@:~# quantum net-list -- --router:external=True
+--------------------------------------+---------+--------------------------------------+
| id                                   | name    | subnets                              |
+--------------------------------------+---------+--------------------------------------+
| 791d5c88-c437-4f82-97f0-ce435acb2172 | ext_net | c9f2a3cf-2013-4452-b3f5-c778143cc87f |
+--------------------------------------+---------+--------------------------------------+
</code></pre>

<p>하지만.. 이게 절대적인 것은 아니고 대부분 이렇다는 것이네요.. ^^;</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/7">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/5">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/03/25/keystone-bootstrap/">Keystone Bootstrap</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/03/25/neutron-default-security-group/">Neutron Default Security Group</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/03/25/hello-octopress/">Hello Octopress</a>
      </li>
    
      <li class="post">
        <a href="/archives/1561">[번역] Selecting CPU, Processors and Memory for Virtualized Environments</a>
      </li>
    
      <li class="post">
        <a href="/archives/1550">클라우드 네트워킹과 SDN 그리고 OpenStack</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/whitekid">@whitekid</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'whitekid',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Choe, Cheng-Dae -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'blog-woosum-net';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
